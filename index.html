<!DOCTYPE html>
<html lang="en">

<!-- next按钮有问题，style.css有问题，info传递有问题 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter.It's what's Happening</title>
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/模态框.css">

    <link rel="stylesheet" href="./css/xc.css">
</head>
<body>
    <!-- 模态框 -->

    <div class="create" >   <!--声明一个容器-->
        <div class="modal-content"><!--用来存放要展示的内容-->
            <!-- &times是乘号的意思，用来制作关闭按钮-->
            <div class="body2">
        <div class="deep">
            <div class="img">
                <img src="" alt="">
            </div>
            <div class="anliu">
                <span class="close-button">X</span>
            </div>
            <div><h2> Create your account </h2></div>
            <form action="" class="info" >
            <div class="shuru">
                <input type="text"name="uname" placeholder="Account" autocomplete="off">
                <span class="msg"></span>
            </div>
            <div class="shuru">
                <span class="iconfont icon-zhanghao"></span>
                <input type="password"name="password" placeholder="Password" autocomplete="off">
                <span class="msg"></span>
            </div>
            <div class="shuru">
                <input type="password"name="confirm" placeholder="Confirm" autocomplete="off">
                <span class="msg"></span>
            </div>
            <div class="bothdate">
                <p>Date of birth</p>
                <div>This will not be shown publicly. Confirm your own age, even if this account is for a business, a pet, or something else.</div>
            </div>
            <div>
                <div class="date">
                    Month:
                    <select name="Month" value="" class="month" >
                    <option value=""></option>
                    <option value="1">January</option>   
                    <option value="2">February</option>   
                    <option value="3">March</option>   
                    <option value="4">April</option> 
                    <option value="5">May</option>  
                    <option value="6">June</option>  
                    <option value="7">July</option>  
                    <option value="8">August</option>  
                    <option value="9">September</option>  
                    <option value="10">October</option>  
                    <option value="11">November</option>  
                    <option value="12">December</option>    
                </select>
                
                    Day:
                    <select name="Day" value="" class="day">
                    <option value=""></option>
                    <option value="1">1</option>   
                    <option value="2">2</option>   
                    <option value="3">3</option>   
                    <option value="4">4</option> 
                    <option value="5">5</option>  
                    <option value="6">6</option>  
                    <option value="7">7</option>  
                    <option value="8">8</option>  
                    <option value="9">9</option>  
                    <option value="10">10</option>  
                    <option value="11">11</option>  
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>    
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>

                </select>
                
                    Year:
                    <select name="Year" class="year">
                    <option value=""></option>
                    <option value="2013">2013</option>
                    <option value="2012">2012</option>
                    <option value="2011">2011</option>
                    <option value="2010">2010</option>
                    <option value="2009">2009</option>
                    <option value="2008">2008</option>
                    <option value="2007">2007</option>
                    <option value="2006">2006</option>   
                    <option value="2005">2005</option>   
                    <option value="2004">2004</option>   
                    <option value="2003">2003</option> 
                    <option value="2002">2002</option>  
                    <option value="2001">2001</option>  
                    <option value="2000">2000</option>  
                    <option value="1999">1999</option>  
                    <option value="1998">1998</option>  
                    <option value="1997">1997</option>  
                    <option value="1996">1996</option>  
                    <option value="1995">1995</option>
                    <option value="1994">1994</option>   
                    <option value="1993">1993</option>   
                    <option value="1992">1992</option>   
                    <option value="1991">1991</option>   
                    <option value="1990">1990</option>   
                    <option value="1989">1989</option>   
                    <option value="1988">1988</option>   
                    <option value="1987">1987</option>   
                    <option value="1986">1986</option>   
                    <option value="1985">1985</option>   
                    <option value="1984">1984</option>   
                    <option value="1983">1983</option>   
                    <option value="1982">1982</option>   
                    <option value="1981">1981</option>   
                    <option value="1980">1980</option>   
                    <option value="1979">1979</option>   
                    <option value="1978">1978</option>   
                    <option value="1977">1977</option>   
                    <option value="1976">1976</option>   
                    <option value="1975">1975</option>       
                </select>
            </div>
            <!-- <div class="submit">
                <button type="button" class="next">Next</button>
            </div> -->
            <button type="button" class="submit">
                <div class="next">Next</div>
            </button>
            
        
    </div>
    </div>
</form>
        </div>
    </div>
</div>
       <!-- 以上是注册页面的模态框 -->

       <!-- 以下是登录界面模态框 -->

       <!-- <div class="signin">   声明一个容器
           <div class="signin-content">用来存放要展示的内容 -->
            <div class="signin" >   <!--声明一个容器-->
                <div class="signin-content"><!--用来存放要展示的内容-->
                    <!-- &times是乘号的意思，用来制作关闭按钮-->
                    <div class="body2">
                <div class="deep">
                    <div class="img">
                        <img src="" alt="">
                    </div>
                    <div class="anliu">
                        <span class="close-button-signin">X</span>
                    </div>
                    <div><h2> Sign in to Twitter </h2></div>
                    
                    <form action="" class="signin-form" >
                    <div class="shuru">
                        <input type="text"name="uname" placeholder="Account" autocomplete="off" class="account">
                        <span class="msg"></span>
                    </div>
                    <div class="shuru">
                        <span class="iconfont icon-zhanghao"></span>
                        <input type="password"name="password" placeholder="Password" autocomplete="off"class="signin_password">
                        <span class="msg"></span>
                    </div>
                    <div class="bothdate">
                        <p>Don't have an account?</p>
                        <div> <a href="#" style="color: #1d9bf0;" class="Sign_up_now"> Sign up now </a></div>
                       
                    </div>
                    <!-- <div class="submit">
                        <button type="button" class="next">Next</button>
                    </div> -->
                    <button type="button" class="sigin_submit">
                        <div class="next">Next</div>
                    </button>
            </div>
            
            </div>
        </form>
                </div>
            </div>
        </div>
       <!-- 以上是登录界面模态框 -->


        <!-- 谷歌登录界面 -->
        <div class="google_signin" >   <!--声明一个容器-->
            <div class="google-content"><!--用来存放要展示的内容-->
                <!-- &times是乘号的意思，用来制作关闭按钮-->
                <div class="body3">
            <div class="deep">
                <div class="img">
                    <img src="" alt="">
                </div>
                <div class="anliu">
                    <span class="close-button-google">X</span>
                </div>
                <div style="display: flex; justify-content: start;">
                    <img src="./resource/google.png" width="30px" height="30px" alt="[google]">
                     <h2>&nbsp; Google Sign in to Twitter </h2>
                   </div>
                
                <form action="" class="signin-form" >
                <div class="shuru">
                    <input type="text"name="uname" placeholder="Account" autocomplete="off" class="account">
                    <span class="msg"></span>
                </div>
                <div class="shuru">
                    <span class="iconfont icon-zhanghao"></span>
                    <input type="password"name="password" placeholder="Password" autocomplete="off"class="signin_password">
                    <span class="msg"></span>
                </div>
                <div class="bothdate">
                    <p>Don't have an account?</p>
                    <div> <a href="#" style="color: #1d9bf0;" class="Sign_up_now"> Sign up now </a></div>
                   
                </div>
                <!-- <div class="submit">
                    <button type="button" class="next">Next</button>
                </div> -->
                <button type="button" class="sigin_submit">
                    <div class="next000">Next</div>
                </button>
        </div>
        
        </div>
    </form>
            </div>
        </div>
    </div>
   <!-- 以上是谷歌登录界面模态框 -->



<!-- apple· 登录界面 -->
<div class="apple_signin" >   <!--声明一个容器-->
    <div class="apple-content"><!--用来存放要展示的内容-->
        <!-- &times是乘号的意思，用来制作关闭按钮-->
        <div class="body3">
    <div class="deep">
        <div class="img">
            <img src="" alt="">
        </div>
        <div class="anliu">
            <span class="close-button-apple">X</span>
        </div>
        <div style="display: flex; justify-content: start;">
            <img src="./resource/apple.png" width="30px" height="35px" alt="[google]">
             <h2>&nbsp; Apple Sign in to Twitter </h2>
           </div>
        
        <form action="" class="signin-form" >
        <div class="shuru">
            <input type="text"name="uname" placeholder="Account" autocomplete="off" class="account">
            <span class="msg"></span>
        </div>
        <div class="shuru">
            <span class="iconfont icon-zhanghao"></span>
            <input type="password"name="password" placeholder="Password" autocomplete="off"class="signin_password">
            <span class="msg"></span>
        </div>
        <div class="bothdate">
            <p>Don't have an account?</p>
            <div> <a href="#" style="color: #1d9bf0;" class="Sign_up_now"> Sign up now </a></div>
           
        </div>
        <!-- <div class="submit">
            <button type="button" class="next">Next</button>
        </div> -->
        <button type="button" class="sigin_submit">
            <div class="next000">Next</div>
        </button>
</div>

</div>
</form>
    </div>
</div>
</div>
<!-- 以上是apple登录界面模态框 -->






    <div class="body1">
        <div class="img">
            <img src="./resource/twitter.png" width="420px" height="350px" alt="[picture]">
        </div>
        <div class="head">
            <p style="font-size: 40px; font-weight: 700;margin-bottom: 30px; width: 350px;">Happening now</p>
            <p style="font-size: 18px; font-weight: 700;">Join today</p>

            <div class="denglu">
                <a href="#">
                    <div class="google">
                        <img src="./resource/google.png" width="30px" height="30px" alt="">
                        <div>Sign up with Google</div>
                    </div>
                </a>
            </div>
            
            <div class="denglu">
                <a href="#" class="denglu">
                    <div class="apple">
                        <img src="./resource/apple.png" width="30px" height="35px" alt="">
                        <div>Sign up with Apple</div>
                    </div>
                </a>
            </div>
            
            
            <div class="signline">
                or
            </div>

            <div class="creatbutton">
                <div><a href="#" class="btn">Creat acount</a></div>
            </div>

            <div class="zhengce">By signing up,you agree to the <a href="#">terms of Service</a> and <a href="#">Privacy Policy</a>,includeing <a href="#">Cookie Use.</a></div>

            <div class="haveac">
                <div class="hadac">Already have an account?</div>
                <a href="#">
                    <div class="Signin">
                        <div>Sign in</div>
                    </div>
                </a>
            </div>
        </div>
    </div>
                <!-- 模态框 -->

    <script>
        const array = JSON.parse(localStorage.getItem('data')) || []
        
        //把表单获取过来
        
        //注册页面模态框 
        const create = document.querySelector('.create')
        const btn = document.querySelector('.creatbutton')
        const close = document.querySelector('.close-button')
        btn.addEventListener('click',function(){

            create.classList.toggle('active-create')

        })
        close.addEventListener('click',function(){
            create.classList.toggle('active-create')
            info.reset()
            uname.nextElementSibling.innerHTML = ''
            password.nextElementSibling.innerHTML =''
            confirm.nextElementSibling.innerHTML=''
        })

        //登录界面模态框
        const Signin = document.querySelector('.Signin')//登录按钮
        const signin = document.querySelector('.signin')//登录的模态框
        const closesignin = document.querySelector('.close-button-signin')
        // const close2 = document.querySelector('')

        Signin.addEventListener('click',function(){
            signin.classList.toggle('active-signin')

        })
        closesignin.addEventListener('click',function(){
            signin.classList.toggle('active-signin')
            info.reset()
        })
        
        //点击创建账号跳转
        const Sign_up_now = document.querySelector('.Sign_up_now')
        Sign_up_now.addEventListener('click',function(){
            signin.classList.toggle('active-signin')
            create.classList.toggle('active-create')
        })
        //以上是登录模态框


        //谷歌登录界面模态框
        const google = document.querySelector('.google')//登录按钮
        const google_signin = document.querySelector('.google_signin')//登录的模态框
        const closebuttonsignin = document.querySelector('.close-button-google')
        // const close2 = document.querySelector('')

        google.addEventListener('click',function(){
            google_signin.classList.toggle('active-google')

        })
        closebuttonsignin.addEventListener('click',function(){
            google_signin.classList.toggle('active-google')
            info.reset()
        })
        //谷歌登录界面模态框


        //apple登录界面模态框
        const apple = document.querySelector('.apple')//登录按钮
        const apple_signin = document.querySelector('.apple_signin')//登录的模态框
        const closebuttonapple = document.querySelector('.close-button-apple')  //关闭按钮
        // const close2 = document.querySelector('')

        apple.addEventListener('click',function(){
            apple_signin.classList.toggle('active-apple')

        })
        closebuttonapple.addEventListener('click',function(){
            apple_signin.classList.toggle('active-apple')
            info.reset()
        })
        //apple登录界面模态框


        const uname = document.querySelector('[name=uname]')
        const password = document.querySelector('[name=password]')
        const confirm=document.querySelector('[name=confirm]')

        const month = document.querySelector('.month')
        
        const day = document.querySelector('.day')
        const year = document.querySelector('.year')
        const info = document.querySelector('.info')
        

        


        let flag=1;

uname.addEventListener('change',verifyName)
  //change事件，每次内容发生了改变就触发
  //用这个函数去写验证事件
  function verifyName()
  {
    const span =uname.nextElementSibling //提示语是username的下一个兄弟
    //验证字符串前先设定规则
    const reg = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$/
    if(!reg.test(uname.value)){//测试username里面的值是否符合规则, 我们取反代表如果不符合
      span.innerHTML = '输入不合法,请输入您的邮箱'
      return false//下面哪个事件如果函数返回的是false就会中断
    }
    else
    {
        for(let i=0;i<array.length;i++)
        {
            if((uname.value===array[i].uname))
            {
                span.innerHTML = '该账号已注册！'
                flag=0;
                return false
            }
        }
        flag=1;
      span.innerHTML = ''//如果之前不合法过的话，再合法并且不清除span里面的东西，语句就会一直留着
      return true
    }
  }


   //需求五:密码验证
  password.addEventListener('change',verifypwd)
  //change事件，每次内容发生了改变就触发
  //用这个函数去写验证事件
  function verifypwd()
  {
    const span =password.nextElementSibling //提示语是phone的下一个兄弟
    //验证字符串前先设定规则
    const reg = /^[a-zA-Z0-9_]{6,20}$/
    if(!reg.test(password.value)){//测试username里面的值是否符合规则, 我们取反代表如果不符合
      span.innerHTML = '密码不合法,6-20位数字字母组成'
      return false//下面哪个事件如果函数返回的是false就会中断
    }
    else
    {
      span.innerHTML = ''//如果之前不合法过的话，再合法并且不清除span里面的东西，语句就会一直留着
      return true
    }
  }


  let id = 0;
  //需求六:密码的再次验证
  confirm.addEventListener('change',verifyconfirm)
  //change事件，每次内容发生了改变就触发
  //用这个函数去写验证事件
  function verifyconfirm()
  {
    const span =confirm.nextElementSibling //提示语是phone的下一个兄弟
    //不需要定义规则了
    if(confirm.value!==password.value){//测试username里面的值是否符合规则, 我们取反代表如果不符合
      span.innerHTML = '密码不一致'
      return false//下面哪个事件如果函数返回的是false就会中断
    }
    else
    {
      span.innerHTML = ''//如果之前不合法过的话，再合法并且不清除span里面的东西，语句就会一直留着
      return true

      
    }
  }
        
        //数据获取模块
        const submit  =document.querySelector('.submit')
        id =array.length; 
        submit.addEventListener('click',function(e){
        e.preventDefault()
        //非空判断
        //没值就是假，非假就是真  也就是说下面只要有一个是空就会进入if
        if(!uname.value || !password.value || !month.value||!day.value||!year.value||!confirm.value||flag===0)
        {
            if(flag===1)
            return alert('有内容没有输入！')
            else
            return alert('该账号已经注册！')
            //return 就会直接结束这个函数就不会继续执行了
        }
        else   //都写了就可以添加数据
        {

            array.push({
                background:'',//默认背景图片地址
                tou:'./resource/默认头像.png',//默认头像地址
                account:uname.value,//账号等于输入的邮箱
                uname: 'New user',
                password: password.value,
                month: month.value,
                day: day.value,
                year: year.value,
                id:`${id}`,
            })
            
            //console.log(array)
            // 填写完以后重置表单
            // this.reset()


            //之前没有视频没有写如何存入本地，这里可以再做一步
            //括号里面第一个值是你把这个东西存进去，给它在里面赋的名字
            //这样不断地把数据覆盖成array，保证存的是最新的数据
            localStorage.setItem('data',JSON.stringify(array))//命名为data

            setTimeout(function(){  
            location.href ='tishi.html'
            },600)
            
        }
    })
            //登录模块验证

        const account = document.querySelector('.account')
        const signin_password = document.querySelector('.signin_password')
        const sigin_submit = document.querySelector('.sigin_submit')//提交按钮获取

        
        
        const sign = JSON.parse(localStorage.getItem('sign')) || []  //记录目前登录的用户
        sigin_submit.addEventListener('click',function(e){
            //console.log(array)
            e.preventDefault()
            let flag1 = 0;
            let flag2 = 0;
            let i =0;
            let index=0;
            for( i =0;i<array.length;i++)
            {
                if(array[i].account === account.value)
                {
                    index=i;
                    flag1 =1;
                }
                if(array[i].password === signin_password.value)
                {
                    flag2 =1;
                }
            }
            if(flag1&&flag2)
            {
                sign.push({
                    id : array[index].id,//它是第几位登录的
                    uname : array[index].uname,//用户名
                    account : array[index].account,//账号
                    tou : array[index].tou,  //头像
                    background : array[index].background //背景图片
                    //img:, 头像
                    //account:,
                })
                    
                localStorage.setItem('sign',JSON.stringify(sign))//把array[i]中的id数据压入sign
                setTimeout(function(){
                    location.href ='zhuye.html'
                },800)
                
            }
            else if(flag1===1&&flag2===0)
            {
                alert('密码错误！')
                
            }
            else
            {
                alert('不存在该账号')
                
            }
        })
    </script>
</body>
</html>